<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Club Adviser Dashboard</title>
    
    <link rel="stylesheet" href="/public/ClubPortalFeed/ClubPortalFeed.css">
    <link rel="stylesheet" href="/public/TeacherDashboard/ClubAdviserDashboard.css">
    
    <style>
        /* DASHBOARD SPECIFIC STYLES */
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            display: flex;
            align-items: center;
            gap: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: 25px;
            border: 1px solid #eee;
        }

        /* The Logo Container (Crucial for the Hover Effect) */
        .logo-upload-wrapper {
            position: relative;
            width: 100px;
            height: 100px;
            cursor: pointer;
        }
        
        .logo-upload-wrapper:hover::after {
            content: "üì∑";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 50%;
        }

        #DisplayClubLogo {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #fa3737;
        }

        /* Content Sections */
        .section-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        /* Tables */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        .admin-table th, .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .admin-table th {
            background-color: #f8f9fa;
            color: #555;
            font-weight: 600;
        }

        /* Buttons */
        .btn-approve { background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
        .btn-reject { background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
        .btn-save { background: #fa3737; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }

        /* Dark Mode Overrides */
        body.dark-mode .dashboard-header,
        body.dark-mode .section-card {
            background: #1e1e1e;
            border-color: #333;
            color: #e0e0e0;
        }
        body.dark-mode .section-title {
            color: white;
            border-color: #444;
        }
        body.dark-mode .admin-table th {
            background: #2c2c2c;
            color: #ccc;
            border-bottom: 1px solid #444;
        }
        body.dark-mode .admin-table td {
            border-bottom: 1px solid #333;
            color: #ddd;
        }
    </style>
</head>
<body>

    <header id="HomeHeader">
        <a href="#" id="homebutton">UE CLUB PORTAL</a>
        
        <div class="header-right">
            <span id="SchoolYear">SY 2025-2026</span>
            <div id="UserProfile"></div> </div>
    </header>

    <nav id="MainSideBar">
        <ul id="MainSideBarList"></ul>
    </nav>

    <main id="MainContent">
        <div class="dashboard-container">
            
            <div class="dashboard-header">
                <div class="logo-upload-wrapper" title="Click to update logo">
                    <img id="DisplayClubLogo" src="/public/images/default-club.png" alt="Club Logo">
                </div>
                
                <div>
                    <h1 id="DisplayClubName" style="margin:0; font-size:1.8rem;">Loading Club...</h1>
                    <p id="AdviserWelcome" style="color:#666; margin:5px 0 0 0;">Club Adviser</p>
                    <div style="margin-top:10px;">
                        <span class="status-badge green">Total Members: <span id="DisplayMemberCount">0</span></span>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <div class="section-title">üìù Pending Applications</div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Club</th>
                            <th>Date Applied</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="ApplicationsList">
                        <tr><td colspan="4" style="text-align:center;">Loading applications...</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="section-card">
                <div class="section-title">üì¢ Create Announcement</div>
                <form id="CreatePostForm" style="display:flex; flex-direction:column; gap:15px;">
                    <input type="text" id="postTitle" placeholder="Title of Announcement" required 
                           style="padding:10px; border:1px solid #ddd; border-radius:6px;">
                    
                    <textarea id="postContent" rows="4" placeholder="What's happening?" required 
                              style="padding:10px; border:1px solid #ddd; border-radius:6px; font-family:inherit;"></textarea>
                    
                    <div style="display:flex; gap:15px; align-items:center;">
                        <select id="postVisibility" style="padding:8px; border-radius:6px;">
                            <option value="public">üåç Public (Everyone)</option>
                            <option value="club-only">üîí Members Only</option>
                        </select>
                        
                        <input type="file" id="postMedia" accept="image/*">
                        
                        <button type="submit" class="btn-save" style="margin-left:auto;">Publish Post</button>
                    </div>
                </form>
            </div>

            <div class="section-card">
                <div class="section-title">‚úèÔ∏è Edit Club Profile</div>
                <div style="display:grid; gap:15px;">
                    <div>
                        <label style="display:block; margin-bottom:5px; font-weight:bold;">Short Description</label>
                        <input type="text" id="ShortDescInput" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:6px;">
                    </div>
                    <div>
                        <label style="display:block; margin-bottom:5px; font-weight:bold;">Full Description</label>
                        <textarea id="FullDescInput" rows="3" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:6px;"></textarea>
                    </div>
                    <button onclick="saveDescription()" class="btn-save" style="width:fit-content;">Save Changes</button>
                </div>
            </div>

            <div class="section-card">
    <div class="section-title">üë• Club Members</div>
    <table class="admin-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Club Role</th> <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="MemberList">
            <tr><td colspan="5" style="text-align:center;">Loading members...</td></tr>
        </tbody>
    </table>
</div>

        </div>
    </main>

    <div id="RestrictModal" class="modal-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000; justify-content:center; align-items:center;">
        <div class="modal-content" style="background:white; padding:25px; border-radius:8px; width:400px; max-width:90%;">
            <h3>Restrict User: <span id="RestrictTargetName"></span></h3>
            
            <label style="display:block; margin-top:10px;">Duration:</label>
            <select id="RestrictDuration" style="width:100%; padding:8px; margin-bottom:10px;">
                <option value="7">7 Days</option>
                <option value="30">30 Days</option>
                <option value="permanent">Permanent</option>
            </select>
            
            <label>Reason:</label>
            <textarea id="RestrictReason" rows="3" style="width:100%; padding:8px; margin-bottom:15px;"></textarea>
            
            <div style="display:flex; justify-content:flex-end; gap:10px;">
                <button onclick="window.closeRestrictModal()" style="padding:8px 15px; cursor:pointer;">Cancel</button>
                <button onclick="window.submitRestriction()" class="btn-reject">Restrict</button>
            </div>
        </div>
    </div>

    <script src="/public/Global.js"></script>
    <script src="/public/TeacherDashboard/ClubAdviserDashboard.js"></script>

</body>
</html>